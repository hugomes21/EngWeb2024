extends layout

block content
  nav.w3-bar.w3-aqua
    div.w3-bar-item.w3-button.w3-hover-none.w3-text-grey.w3-hover-text-white.w3-right
      a(href='/logout') Logout
  .w3-card-4
    header.w3-container.w3-teal
      h1= Rua.nome

    .w3-container.w3-center
      h3
        b Vistas atuais
      .w3-row-padding.w3-margin-top.w3-center
        each figura in Rua.figuras
          if figura.imagem.path.startsWith('../atual')
            .w3-third
              .w3-card
                img(src=`${figura.imagem.path.slice(2)}`, style="width:100%")
                .w3-container
                  h5= figura.legenda

    .w3-container.w3-center.w3-margin-top
      hr

    .w3-container.w3-center
      h3
        b Vistas antigas
      .w3-row-padding.w3-margin-top.w3-center
        each figura in Rua.figuras
          if figura.imagem.path.startsWith('../imagem')
            .w3-third
              .w3-card
                img(src=`${figura.imagem.path.slice(2)}`, style="width:100%")
                .w3-container
                  h5= figura.legenda

    .w3-container.w3-center.w3-margin-top
      hr

    .w3-container.w3-center
      h3
        b Descrição
      .descricao-box.w3-margin-top
        p!= Rua.paragrafo.texto

    .w3-container.w3-center.w3-margin-top
      hr

    .w3-container.w3-center
      h3
        b Casas
      table.w3-table-all.w3-margin-top
        thead
          tr.w3-teal
            th Casa
            th Dono
            th Custo
            th Sobre
        tbody
          each casa in Rua.casas
            tr
              td= casa.numero
              td= casa.enfiteutas
              td= casa.foro
              td
                p!= casa.desc.texto

    .w3-container.w3-center
      h3
        b Comentários
      p.wow Posts
      form(method="POST", action=`/${Rua._id}/post`)
        label Comentário
        input.w3-input.w3-round(type="text" name="texto")

        button.w3-btn.w3-mb-2(type="submit") Publicar

    hr

    each comentario in Rua.comentarios
      hr
      .card.card-white.post
        .post-heading
          h5.title Autor: #{comentario.autor}
          h6.text-muted.time Data: #{comentario.data}
        .post-description
          p #{comentario.texto}
        if(level === "Admin")
          div.btn-group
            button.btn.btn-sm.btn-outline-secondary(type="button")
              a(href="/" + Rua._id + "/unpost/" + comentario._id) Eliminar

    hr

    footer.w3-container.w3-teal.w3-margin-top.w3-center
      a.w3-btn.w3-margin-top.w3-border.w3-round-large.w3-text-white(href='/ruas' style='background-color: #4CAF50;') Voltar à lista
      h5 Generated by Group 38 in #{Data}